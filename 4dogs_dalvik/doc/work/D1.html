<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<title>Aprotector例会以及任务</title>
<!-- 2013-07-26 五 20:12 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
<meta name="generator" content="Org-mode"/>
<meta name="author" content="四维创智"/>
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center; }
  .todo   { font-family: monospace; color: red; }
  .done   { color: green; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  pre.src-sh:before    { content: 'sh'; }
  pre.src-bash:before  { content: 'sh'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-R:before     { content: 'R'; }
  pre.src-perl:before  { content: 'Perl'; }
  pre.src-java:before  { content: 'Java'; }
  pre.src-sql:before   { content: 'SQL'; }

  table { border-collapse:collapse; }
  td, th { vertical-align:top;  }
  th.right  { text-align: center;  }
  th.left   { text-align: center;   }
  th.center { text-align: center; }
  td.right  { text-align: right;  }
  td.left   { text-align: left;   }
  td.center { text-align: center; }
  dt { font-weight: bold; }
  .footpara:nth-child(2) { display: inline; }
  .footpara { display: block; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  /*]]>*/-->
</style>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012  Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">Aprotector例会以及任务</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">1. 进度</a>
<ul>
<li><a href="#sec-1-1">1.1. 6.18 - 6.23</a></li>
<li><a href="#sec-1-2">1.2. 6.24 - 6.30</a></li>
<li><a href="#sec-1-3">1.3. 6.30 - 7.14</a></li>
<li><a href="#sec-1-4">1.4. 7.15 - 7.21</a></li>
<li><a href="#sec-1-5">1.5. 7.22 - 7.24</a></li>
<li><a href="#sec-1-6">1.6. 7.24 - 7.28</a></li>
</ul>
</li>
<li><a href="#sec-2">2. 任务</a>
<ul>
<li><a href="#sec-2-1">2.1. 623任务</a></li>
<li><a href="#sec-2-2">2.2. 630任务</a></li>
<li><a href="#sec-2-3">2.3. 721任务</a></li>
</ul>
</li>
<li><a href="#sec-3">3. 例会</a></li>
</ul>
</div>
</div>

<div id="outline-container-1" class="outline-2">
<h2 id="sec-1"><span class="section-number-2">1</span> 进度</h2>
<div class="outline-text-2" id="text-1">
</div><div id="outline-container-1-1" class="outline-3">
<h3 id="sec-1-1"><span class="section-number-3">1.1</span> 6.18 - 6.23</h3>
<div class="outline-text-3" id="text-1-1">
<p>
1.调查dalvik虚拟机的用法，以及命令参数(李晋飞)
</p>

<p>
2.libdex,dumpdex在windows以及ubuntu系统上的移植(阎文斌)
</p>

<p>
3.找到所有dalvik源代码所需的头文件以及源文件并且综合到一起(阎文斌)
</p>

<p>
4.将dalvik的源代码粗略的过一遍，并形成源文件解释文档(阎文斌，王一飞，彭州，王艳东)
</p>

<p>
5.做一个简单的loader程序,此loader是正常的dex文件,加载一个名为chaosvm.so的动态库并打包成apk。打印是否成功。(李晋飞)
</p>

<p>
6.X1的设计（王一飞) &lt;- 23号对此插件进行了探讨
</p>
</div>
</div>
<div id="outline-container-1-2" class="outline-3">
<h3 id="sec-1-2"><span class="section-number-3">1.2</span> 6.24 - 6.30</h3>
<div class="outline-text-3" id="text-1-2">
<p>
1.对X1重新设计的讨论(王一飞)
</p>

<p>
2.每个人对于623代码分析任务的完成时间进行评估(全体项目组)
</p>
</div>
</div>
<div id="outline-container-1-3" class="outline-3">
<h3 id="sec-1-3"><span class="section-number-3">1.3</span> 6.30 - 7.14</h3>
<div class="outline-text-3" id="text-1-3">
<p>
1.除阎文斌与彭州外其余人完成对所分析的代码模块
</p>

<p>
2.针对hprof进行深入的调查研究(王艳东)
</p>
</div>
</div>
<div id="outline-container-1-4" class="outline-3">
<h3 id="sec-1-4"><span class="section-number-3">1.4</span> 7.15 - 7.21</h3>
<div class="outline-text-3" id="text-1-4">
<p>
1.上次没有分析完毕的文件处理完毕(全体项目组)
</p>

<p>
2.完成721任务(全体项目组)
</p>

<p>
3.确定方案可实施性 (彭州)
</p>
</div>
</div>
<div id="outline-container-1-5" class="outline-3">
<h3 id="sec-1-5"><span class="section-number-3">1.5</span> 7.22 - 7.24</h3>
<div class="outline-text-3" id="text-1-5">
<p>
1.调查android程序入口点技术（李晋飞）
</p>

<p>
2.so文件在android程序的生命周期（李晋飞）
</p>

<p>
3.入口函数最小大小（李晋飞）
</p>

<p>
4.是否可以通过so文件修改DEX文件的映射内存（王一飞）
</p>

<p>
5.对函数名称HASH库接口进行实现（王艳东）
</p>

<p>
6.对chaosvm.so的整体流程进行设计(彭州）
</p>
</div>
</div>
<div id="outline-container-1-6" class="outline-3">
<h3 id="sec-1-6"><span class="section-number-3">1.6</span> 7.24 - 7.28</h3>
<div class="outline-text-3" id="text-1-6">
<p>
1.编写简易版本的chaosvm.so（彭州，王一飞）
</p>

<p>
2.编写简易版本的SDK（李晋飞，王一飞）
</p>

<p>
3.编写简易版本的chaosvmp.exe(王艳东)
</p>

<p>
4.调查android上的感染方式(王艳东，彭州)
</p>
</div>
</div>
</div>
<div id="outline-container-2" class="outline-2">
<h2 id="sec-2"><span class="section-number-2">2</span> 任务</h2>
<div class="outline-text-2" id="text-2">
</div><div id="outline-container-2-1" class="outline-3">
<h3 id="sec-2-1"><span class="section-number-3">2.1</span> 623任务</h3>
<div class="outline-text-3" id="text-2-1">
<p>
alloc目录 - 内存管理 356K (王艳东)
</p>

<p>
analysis - dex文件解析 504K (王一飞 李靖飞)
</p>

<p>
arch - 针对平台进行兼容的代码 80K (阎文斌)
</p>

<p>
compiler - 编译技术实现 3.9M (阎文斌 王艳东)
</p>

<p>
hprof - 内存分析模块 60K (王艳东)
</p>

<p>
interp - c语言版本的字节码解释器 224K (彭州)
</p>

<p>
minterp - 通过c语言版本的解释器生成对应平台的汇编解释器 12M (彭州)
</p>

<p>
jdwp - jdwp调试协议 232K 王一飞 (李靖飞)
</p>

<p>
native - JNI方面的原生JAVA接口 304K (王一飞 李靖飞)
</p>

<p>
oo - 面对对象的处理 340K 王一飞 (李靖飞)
</p>

<p>
os - 针对系统的线程方面的封装 20K (王艳东)
</p>

<p>
reflect - java反射实现 164K (王一飞 李靖飞)
</p>
</div>
</div>
<div id="outline-container-2-2" class="outline-3">
<h3 id="sec-2-2"><span class="section-number-3">2.2</span> 630任务</h3>
<div class="outline-text-3" id="text-2-2">
<p>
analysis - dex文件解析 504K (王一飞）
</p>

<p>
oo - 面对对象的处理 340K (李靖飞)
</p>

<p>
reflect - java反射实现 164K (李靖飞)
</p>

<p>
native - JNIT方面的原声JAVA接口 304K (王一飞 李靖飞)
</p>

<p>
对hprof的实际使用，以及当前android提供的应用做了解(王艳东)
</p>
</div>
</div>
<div id="outline-container-2-3" class="outline-3">
<h3 id="sec-2-3"><span class="section-number-3">2.3</span> 721任务</h3>
<div class="outline-text-3" id="text-2-3">
<p>
王艳东
</p>

<p>
Bits.h BitVector.h/cpp Ddm.h/Ddm.cpp Debugger.h/cpp Exception.h/cpp Hash.h/cpp IndirectRefTable.h/cpp Intern.h/cpp 
</p>

<p>
linerAlloc.h/cpp PointerSet.h/cpp AllocTracker.h/cpp
</p>

<p>
彭州
</p>

<p>
AtomicCache.h/cpp Atomic.h/cpp Common.h Dalvik.h DalvikVersion.h Globals.h Init.h/cpp InitRefs.cpp
</p>

<p>
Misc.h/cpp SignalCatcher.h/cpp StdioConverter.h/cpp Thread.h/cpp Sync.h/cpp UtfString.h/cpp
</p>

<p>
李晋飞 王一飞
</p>

<p>
CheckJni.cpp DvmDex.h/cpp JarFile.h/cpp Jni.cpp JniInternal.h Native.h/cpp RawDexFile.h/cpp
</p>

<p>
ReferenceTable.h/cpp
</p>

<p>
dalvik/Main.cpp （彭州）
</p>

<p>
dalvik整体流程分析 （彭州)
</p>

<p>
闫文斌
</p>

<p>
Profile.h/cpp
</p>
</div>
</div>
</div>
<div id="outline-container-3" class="outline-2">
<h2 id="sec-3"><span class="section-number-2">3</span> 例会</h2>
<div class="outline-text-2" id="text-3">
<p>
6.23(13:30 - 16.15) 623代码分析任务的第一次分工,以及文档的规格。下周确定623任务完成时间。
</p>

<p>
6.30(13:40 - 17:00) 首先对飞哥进行了批评，提交文档格式不正确。飞哥对X1的设计延后。
</p>

<p>
针对623任务的时间进行了规划，确定了代码分析的时间，重新划分了王一飞与李靖飞的工作。
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides" >


<colgroup>
<col class="left"/>

<col class="left"/>
</colgroup>
<tbody>
<tr>
<td class="left">姓名</td>
<td class="left">时间进度</td>
</tr>

<tr>
<td class="left">王一飞</td>
<td class="left">2周</td>
</tr>

<tr>
<td class="left">李靖飞</td>
<td class="left">2周</td>
</tr>

<tr>
<td class="left">彭州</td>
<td class="left">1月</td>
</tr>

<tr>
<td class="left">王艳东</td>
<td class="left">2周</td>
</tr>

<tr>
<td class="left">阎文斌</td>
<td class="left">1月</td>
</tr>
</tbody>
</table>

<p>
7.14(14:30 - 16:30) 飞哥缺席。彭提出了对现有项目实施方案的异议。分配了在vm目录下的源代码分析任务，确定实施方案
</p>

<p>
并且确定了对于代码分析的完成最后期限。（仅这周）
</p>

<p>
7.21(13:30 - 18:10) 本项目本来最初有一套方案（Y1 &lt;- 将PC上的虚拟机保护方案移植到此），由阎文斌提出，
</p>

<p>
后来阎发现更加安全的方案（Y2 &lt;- 自己编译一套dalvik的虚拟机），经过1个月的dalvik代码分析，发现完全自己编译一套
</p>

<p>
dalvik虚拟机，目前实现难度太大，这次会议否决了Y2方案，转而对Y1方案进行了详细的探讨。探讨出了对Y1的修改方案X1,
</p>

<p>
修订完成后，发现彭州解释器这部分实现难度还是太大，具体难点有(1.入口点空间问题，2.感染后调用chaosvm.so调用函数
</p>

<p>
JNI注册问题，3.当前线程在dalvik中的“Thread”结构指针的获取）所以由提出了对X1的简化方案X2,这个方案单一让用户使用
</p>

<p>
我们提供的SDK来完成保护，在保护方面只是通过内存的复制来解决。4份方案可见目录下的X1,X2,Y1,Y2
</p>

<p>
7.24(13:30 - 15:30) 这次会议在中心的办公室召开。解决了一些基本疑问，会议后，彭州提出了目前简化方案X2过于简单，提出
</p>

<p>
了三种级别的解决。（1.采用PC上壳的思路来解决，2.X2，3.X1)。三种实施阶段。
</p>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="date">Date: 13/6/2013</p>
<p class="author">Author: 四维创智</p>
<p class="date">Created: 2013-07-26 五 20:12</p>
<p class="creator"><a href="http://www.gnu.org/software/emacs/">Emacs</a> 23.4.1 (<a href="http://orgmode.org">Org</a> mode 8.0-pre)</p>
<p class="xhtml-validation"><a href="http://validator.w3.org/check?uri=referer">Validate XHTML 1.0</a></p>
</div>
</body>
</html>
